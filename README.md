<a name="Synopis"></a>Synopis<a href="#Synopis" class="section_anchor"></a></h2><p>RPostgreSQL provides a <a href="http://stat.bell-labs.com/RS-DBI/index.html" rel="nofollow">DBI</a>-compliant database connection from <a href="http://www.r-project.org" rel="nofollow">GNU R</a> to <a href="http://www.postgresql.org" rel="nofollow">PostgreSQL</a>. </p><p>Development of RPostgreSQL was supported via the Google Summer of Code 2008 program.  </p><p>The package is now available on the <a href="http://cran.r-project.org" rel="nofollow">CRAN</a> mirror network and  can be installed via <tt>install.packages()</tt> from within <a href="http://www.r-project.org" rel="nofollow">R</a>. </p><p>A mailing list <tt>rpostgresql-dev@googlegroups.com</tt> is available at <a href="https://groups.google.com/forum/?pli=1#!forum/rpostgresql-dev" rel="nofollow">Google Groups as rpostgresql-dev</a>; it is also mirrored at <a href="http://news.gmane.org/gmane.comp.lang.r.rpostgresql" rel="nofollow">Gmane.org</a>. </p><h2><a name="Summary_of_basic_usage"></a>Summary of basic usage<a href="#Summary_of_basic_usage" class="section_anchor"></a></h2><p>1. dbDriver(drv, ...) instantiates the driver object. Eg.  </p><pre class="prettyprint"><span class="pln">drv </span><span class="pun">&lt;-</span><span class="pln"> dbDriver</span><span class="pun">(</span><span class="str">"PostgreSQL"</span><span class="pun">)</span></pre><p>2.dbConnect(drv,...) creates and opens a connection to the database implemented by the driver drv. Connection string should be specified with parameters like user, password, dbname, host, port, tty and options. For more details refer to the documentation. Eg. </p><pre class="prettyprint"><span class="pln">con </span><span class="pun">&lt;-</span><span class="pln"> dbConnect</span><span class="pun">(</span><span class="pln">drv</span><span class="pun">,</span><span class="pln"> dbname</span><span class="pun">=</span><span class="str">"tempdb"</span><span class="pun">)</span></pre><p>3.dbListConnection(drv, ...) provides List of connections handled by the driver Eg. </p><pre class="prettyprint"><span class="pln">dbListConnections</span><span class="pun">(</span><span class="pln">drv</span><span class="pun">)</span></pre><p>4.dbGetInfo(dbObject, ...) and summary(dbObject) returns information about the dbObject (driver, connection or resultSet).  Eg. </p><pre class="prettyprint"><span class="pln">dbGetInfo</span><span class="pun">(</span><span class="pln">drv</span><span class="pun">)</span><span class="pln"><br>summary</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span></pre><p>5.dbSendQuery(con, statement, ...) submits one statement to the database.  Eg.  </p><pre class="prettyprint"><span class="pln">rs </span><span class="pun">&lt;-</span><span class="pln"> dbSendQuery</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"select * from TableName"</span><span class="pun">)</span></pre><p>6.fetch(rs,n, ...) fetches the next n elements from the result set.  Eg.  </p><pre class="prettyprint"><span class="pln">fetch</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">,</span><span class="pln">n</span><span class="pun">=-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="com">## return all elements</span><span class="pln"><br>fetch</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">,</span><span class="pln">n</span><span class="pun">=</span><span class="lit">2</span><span class="pun">)</span><span class="pln"> </span><span class="com">##returns last 2 elements in record set.</span></pre><p>7. dbGetQuery(con,statement, ...) submits, execute, and extract output in one operation. Eg. </p><pre class="prettyprint"><span class="pln">dbGetQuery</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"select * from TableName"</span><span class="pun">)</span></pre><p>8. dbGetException(con, ...) returns the status of the last DBMS statement sent over the connection.  Eg.  </p><pre class="prettyprint"><span class="pln">dbGetException</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span></pre><p>9. dbListResults(con, ...) returns the resultsets active on the given connection. Please note that the current RPostgreSQL package can handle only one resultset per connection (which may change in the future). Eg.  </p><pre class="prettyprint"><span class="pln">dbListResults</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span></pre><p>10. dbListTables(con, ...) returns the list of tables available on the connection.  Eg.  </p><pre class="prettyprint"><span class="pln">dbListTables</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span></pre><p>11. dbExistsTable(con, TableName, ...) checks whether a particular table exists on the given connection. Returns a logical. Eg.  </p><pre class="prettyprint"><span class="pln">dbExistsTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"TableName"</span><span class="pun">)</span></pre><p>12. dbRemoveTable(con, TableName, ...) removes the specified table on the connection. Returns a logical indicating operation succeeded or not.  Eg. </p><pre class="prettyprint"><span class="pln">dbRemoveTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"TableName"</span><span class="pun">)</span></pre><p>13. dbListFields(con, TableName, ...) returns the list of column names (fields) in the table.  Eg.  </p><pre class="prettyprint"><span class="pln">dbListFields</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"TableName"</span><span class="pun">)</span></pre><p>14. dbColumnInfo(res, ...) produces a query that describes the output of the query. Eg.  </p><pre class="prettyprint"><span class="pln">dbColumnInfo</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">)</span></pre><p>15. dbReadTable(conn, name, ...) imports the data stored remotely in the table name on connection conn. Use the field row.names as the row.names attribute of the output data.frame. Returns a data.frame. Eg.  </p><pre class="prettyprint"><span class="pln">dframe </span><span class="pun">&lt;-</span><span class="pln">dbReadTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"TableName"</span><span class="pun">).</span><span class="pln"> </span></pre><p>16. dbWriteTable(conn, name, value, ...) writes the contents of the dataframe value into the table name specified. Returns a logical indicating whether operation succeeded or not.  Eg.  </p><pre class="prettyprint"><span class="pln">dbWriteTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">,</span><span class="pln">dframe</span><span class="pun">)</span></pre><p>17. dbGetStatement(res, ...) returns the DBMS statement associated with the result. Eg.  </p><pre class="prettyprint"><span class="pln">dbGetStatement</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">)</span></pre><p>18. dbGetRowsAffected(res, ...) returns the rows affected the executed statement. If no rows are affected, "-1" is returned. Eg.  </p><pre class="prettyprint"><span class="pln">dbGetRowsAffected</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">)</span></pre><p>19. dbHasCompleted(res, ...) returns a logical to indicate whether an operation is completed or not. Eg.  </p><pre class="prettyprint"><span class="pln">dbHasCompleted</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">)</span></pre><p>20.dbGetRowCount(res, ...) returns number of rows fetched so far. Eg.  </p><pre class="prettyprint"><span class="pln">dbGetRowCount</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">)</span></pre><p>21.dbBeginTransaction begins the PostgreSQL transaction. dbCommit commits the transaction while dbRollback rolls back the transaction. Returns a logical indicating whether the operation succeeded or not. Eg.   </p><pre class="prettyprint"><span class="pln">dbBeginTransaction</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span><span class="pln"><br>dbRemoveTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">)</span><span class="pln"><br>dbExistsTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">)</span><span class="pln"><br>dbRollback</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span><span class="pln"><br>dbExistsTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">)</span><span class="pln"><br><br>dbBeginTransaction</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span><span class="pln"><br>dbRemoveTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">)</span><span class="pln"><br>dbExistsTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">)</span><span class="pln"><br>dbCommit</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span><span class="pln"><br>dbExistsTable</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="str">"newTable"</span><span class="pun">)</span></pre><p>22. dbClearResult(rs, ...) flushes any pending data and frees the resources used by resultset. Eg. </p><pre class="prettyprint"><span class="pln">dbClearResult</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">)</span></pre><p>23. dbDisconnect(con, ...) closes the connection.  Eg. </p><pre class="prettyprint"><span class="pln">dbDisconnect</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span></pre><p>24. dbUnloadDriver(drv,...) frees all the resources used by the driver. Eg. </p><pre class="prettyprint"><span class="pln">dbUnloadDriver</span><span class="pun">(</span><span class="pln">drv</span><span class="pun">)</span></pre><h2><a name="Example"></a>Example<a href="#Example" class="section_anchor"></a></h2><pre class="prettyprint"><span class="pln">library</span><span class="pun">(</span><span class="typ">RPostgreSQL</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## loads the PostgreSQL driver</span><span class="pln"><br>drv </span><span class="pun">&lt;-</span><span class="pln"> dbDriver</span><span class="pun">(</span><span class="str">"PostgreSQL"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## Open a connection</span><span class="pln"><br>con </span><span class="pun">&lt;-</span><span class="pln"> dbConnect</span><span class="pun">(</span><span class="pln">drv</span><span class="pun">,</span><span class="pln"> dbname</span><span class="pun">=</span><span class="str">"R_Project"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## Submits a statement</span><span class="pln"><br>rs </span><span class="pun">&lt;-</span><span class="pln"> dbSendQuery</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="pln"> </span><span class="str">"select * from R_Users"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## fetch all elements from the result set</span><span class="pln"><br>fetch</span><span class="pun">(</span><span class="pln">rs</span><span class="pun">,</span><span class="pln">n</span><span class="pun">=-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## Submit and execute the query</span><span class="pln"><br>dbGetQuery</span><span class="pun">(</span><span class="pln">con</span><span class="pun">,</span><span class="pln"> </span><span class="str">"select * from R_packages"</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## Closes the connection</span><span class="pln"><br>dbDisconnect</span><span class="pun">(</span><span class="pln">con</span><span class="pun">)</span><span class="pln"><br><br></span><span class="com">## Frees all the resources on the driver</span><span class="pln"><br>dbUnloadDriver</span><span class="pun">(</span><span class="pln">drv</span><span class="pun">)</span></pre><p>For any queries, suggestions or bugs, please contact the mailing list stated above. </p>
